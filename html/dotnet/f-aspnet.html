<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-04-08 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ASP.NET</title>
<meta name="generator" content="Org mode">
<meta name="author" content="悟饭">
<link rel='stylesheet' href='/html/asset/common.css?3344' />
<link rel='stylesheet' href='/yaoliuyao/html/asset/common.css?3344' />
<script src='https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js'></script>
<script src='https://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js'></script>
<script src='/html/asset/common.js'></script>
<script src='/yaoliuyao/html/asset/common.js'></script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">ASP.NET</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org3d6c7e9">1. Prelude</a>
<ul>
<li><a href="#orgaeb87db">1.1. 请求</a>
<ul>
<li><a href="#org94e0250">1.1.1. A 超链接</a></li>
<li><a href="#org956006e">1.1.2. FORM 表单</a></li>
<li><a href="#org2384b99">1.1.3. [AJAX] XMLHttpRequest</a></li>
<li><a href="#org70dcdeb">1.1.4. jQuery (封装)</a></li>
<li><a href="#org491c23d">1.1.5. Fetch API</a></li>
<li><a href="#org8861c0b">1.1.6. axios</a></li>
</ul>
</li>
<li><a href="#orgb5b2e0e">1.2. 页面</a>
<ul>
<li><a href="#orgea09761">1.2.1. A/FORM</a></li>
<li><a href="#orgb7dc610">1.2.2. AJAX/原生 DOM 节点</a></li>
<li><a href="#org6327adb">1.2.3. jQuery</a></li>
<li><a href="#org4c9f26a">1.2.4. Vue/ReactJS/Angular</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org09e9bb8">2. ASP.NET Core</a>
<ul>
<li><a href="#org4497edf">2.1. 基本概念</a></li>
</ul>
</li>
<li><a href="#org900d865">3. MVC</a></li>
<li><a href="#org37d53cf">4. WebAPI</a>
<ul>
<li><a href="#org1379624">4.1. 项目的创建</a></li>
<li><a href="#orgb65e312">4.2. Controller</a></li>
<li><a href="#org3922bce">4.3. RESTful</a></li>
<li><a href="#orge5b511c">4.4. OpenAPI/Swagger</a></li>
</ul>
</li>
<li><a href="#org83525d8">5. Identity</a></li>
</ul>
</div>
</nav>


<section id="outline-container-org3d6c7e9" class="outline-2">
<h2 id="org3d6c7e9"><span class="section-number-2">1.</span> Prelude</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgaeb87db" class="outline-3">
<h3 id="orgaeb87db"><span class="section-number-3">1.1.</span> 请求</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org94e0250" class="outline-4">
<h4 id="org94e0250"><span class="section-number-4">1.1.1.</span> A 超链接</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
将请求的参数，携带到 QueryString 中发送到服务器:
</p>
<pre class="example">
GET http://localhost:5001/comment/dolike?id=3
GET http://localhost:5001/comment/dolike/3
</pre>
</div>
</div>

<div id="outline-container-org956006e" class="outline-4">
<h4 id="org956006e"><span class="section-number-4">1.1.2.</span> FORM 表单</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
使用 Form 标签 + Input 进行更多属性的 <b>交互式</b> 提交:
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #b22222;">&lt;!-- </span><span style="color: #b22222;">GET /comment/dosave?x=1&amp;y=2&amp;z=3 </span><span style="color: #b22222;">--&gt;</span>

<span style="color: #707183;">&lt;</span><span style="color: #0000ff;">form</span> <span style="color: #a0522d;">action</span>=<span style="color: #8b2252;">"/comment/dosave"</span> <span style="color: #a0522d;">method</span>=<span style="color: #8b2252;">"get"</span><span style="color: #707183;">&gt;</span>
  <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">input</span> <span style="color: #a0522d;">name</span>=<span style="color: #8b2252;">"x"</span> <span style="color: #a0522d;">value</span>=<span style="color: #8b2252;">"1"</span><span style="color: #707183;">&gt;</span>
  <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">input</span> <span style="color: #a0522d;">name</span>=<span style="color: #8b2252;">"y"</span> <span style="color: #a0522d;">value</span>=<span style="color: #8b2252;">"2"</span><span style="color: #707183;">&gt;</span>
  <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">input</span> <span style="color: #a0522d;">name</span>=<span style="color: #8b2252;">"z"</span> <span style="color: #a0522d;">value</span>=<span style="color: #8b2252;">"3"</span> <span style="color: #a0522d;">type</span>=<span style="color: #8b2252;">"password/number/date"</span><span style="color: #707183;">&gt;</span>

  <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">div</span><span style="color: #707183;">&gt;</span>
    <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">div</span><span style="color: #707183;">&gt;</span>
      <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">button</span><span style="color: #707183;">&gt;</span>&#25552;&#20132;<span style="color: #707183;">&lt;</span>/<span style="color: #0000ff;">button</span><span style="color: #707183;">&gt;</span>
      <span style="color: #707183;">&lt;</span><span style="color: #0000ff;">input</span> <span style="color: #a0522d;">type</span>=<span style="color: #8b2252;">"submit"</span> <span style="color: #a0522d;">value</span>=<span style="color: #8b2252;">"&#25552;&#20132;"</span><span style="color: #707183;">&gt;</span>
    <span style="color: #707183;">&lt;</span>/<span style="color: #0000ff;">div</span><span style="color: #707183;">&gt;</span>
  <span style="color: #707183;">&lt;</span>/<span style="color: #0000ff;">div</span><span style="color: #707183;">&gt;</span>
<span style="color: #707183;">&lt;</span>/<span style="color: #0000ff;">form</span><span style="color: #707183;">&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2384b99" class="outline-4">
<h4 id="org2384b99"><span class="section-number-4">1.1.3.</span> [AJAX] XMLHttpRequest</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest</a>
</p>

<p>
Asynchronous JavaScript and XML:
</p>
<ul class="org-ul">
<li>异步 (不会导致当前页面卡顿)</li>
<li>局部刷新 (JS 操作 DOM 节点)</li>
</ul>

<p>
使用 AJAX 进行操作的基本流程:
</p>
<ul class="org-ul">
<li>第一步，发送请求</li>
<li>第二步，获取响应的数据</li>
<li>第三步，将数据组装为需要的 html 字符串</li>
<li>第四步，找到某个 dom 节点，将上述 html 字符串添加到其中</li>
</ul>

<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">var</span> <span style="color: #a0522d;">xhr</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">XMLHttpRequest</span><span style="color: #707183;">()</span>;
<span style="color: #b22222;">//</span><span style="color: #b22222;">xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");</span>
xhr.setRequestHeader<span style="color: #707183;">(</span><span style="color: #8b2252;">"xxx"</span>, <span style="color: #8b2252;">"123"</span><span style="color: #707183;">)</span>;
xhr.open<span style="color: #707183;">(</span><span style="color: #8b2252;">"get"</span>, <span style="color: #8b2252;">"http://localhost:5001/comment/dosave"</span><span style="color: #707183;">)</span>;
xhr.send<span style="color: #707183;">(</span><span style="color: #8b2252;">"Author=lisi&amp;Content=xxx"</span><span style="color: #707183;">)</span>;

<span style="color: #b22222;">//// </span><span style="color: #b22222;">&#36890;&#36807;&#20107;&#20214;&#65292;&#32465;&#23450;&#30456;&#20851;&#21160;&#20316;</span>
xhr.onload = <span style="color: #707183;">(</span>event<span style="color: #707183;">)</span> =&gt; <span style="color: #707183;">{</span>
    <span style="color: #a020f0;">if</span> <span style="color: #7388d6;">(</span>xhr.statusCode == 200<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">content</span> = xhr.responseText; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36820;&#22238;&#30340;&#21709;&#24212;&#23383;&#31526;&#20018;</span>
        <span style="color: #b22222;">//</span><span style="color: #b22222;">window.location.refresh();</span>
        <span style="color: #b22222;">//</span><span style="color: #b22222;">dom.innerHTML = content;</span>
        dom.innerHTML = JSON.parse<span style="color: #909183;">(</span>content<span style="color: #909183;">)</span>.xxx;
    <span style="color: #7388d6;">}</span>
<span style="color: #707183;">}</span>;
xhr.error = <span style="color: #707183;">(</span>err<span style="color: #707183;">)</span> =&gt;
<span style="color: #707183;">{</span>
    alert<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"&#20445;&#23384;&#22833;&#36133;!"</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>
</pre>
</div>

<p>
对于 JSON 的处理
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">xhr</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">XmlHttpRequest</span><span style="color: #707183;">()</span>;
xhr.open<span style="color: #707183;">()</span>;
xhr.send<span style="color: #707183;">()</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#31532;&#19968;&#31181;&#26041;&#24335;</span>
xhr.onload = <span style="color: #707183;">(</span>e<span style="color: #707183;">)</span> =&gt;
<span style="color: #707183;">{</span>
    <span style="color: #a020f0;">if</span> <span style="color: #7388d6;">(</span>xhr.statusCode == 200<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">text</span> = xhr.responseText; <span style="color: #b22222;">// </span><span style="color: #b22222;">DOMString</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">json</span> = JSON.parse<span style="color: #909183;">(</span>text<span style="color: #909183;">)</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">JSON &#23545;&#35937;</span>
        alert<span style="color: #909183;">(</span>json<span style="color: #709870;">[</span>1<span style="color: #709870;">]</span>.name<span style="color: #909183;">)</span>;
    <span style="color: #7388d6;">}</span>
<span style="color: #707183;">}</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#31532;&#20108;&#31181;&#26041;&#24335;</span>
xhr.responseType = <span style="color: #8b2252;">"json"</span>;
xhr.onload = <span style="color: #707183;">(</span>e<span style="color: #707183;">)</span> =&gt;
<span style="color: #707183;">{</span>
    <span style="color: #a020f0;">if</span> <span style="color: #7388d6;">(</span>xhr.statusCode == 200<span style="color: #7388d6;">)</span>
    <span style="color: #7388d6;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">json</span> = xhr.response; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26681;&#25454; responseType &#33258;&#21160;&#26684;&#24335;&#21270;</span>
        alert<span style="color: #909183;">(</span>json<span style="color: #709870;">[</span>1<span style="color: #709870;">]</span>.name<span style="color: #909183;">)</span>;
    <span style="color: #7388d6;">}</span>
<span style="color: #707183;">}</span>;
</pre>
</div>
</div>
</div>


<div id="outline-container-org70dcdeb" class="outline-4">
<h4 id="org70dcdeb"><span class="section-number-4">1.1.4.</span> jQuery (封装)</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
旧时代的残迹:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">createXHR</span> <span style="color: #707183;">()</span>
<span style="color: #707183;">{</span>
    <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">xmlHttp</span> = <span style="color: #008b8b;">false</span>;
    <span style="color: #a020f0;">try</span> <span style="color: #7388d6;">{</span>
        xmlHttp = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">XMLHttpRequest</span><span style="color: #909183;">()</span>;
    <span style="color: #7388d6;">}</span> <span style="color: #a020f0;">catch</span> <span style="color: #7388d6;">(</span>trymicrosoft<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">{</span>
        <span style="color: #a020f0;">try</span> <span style="color: #909183;">{</span>
            xmlHttp = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ActiveXObject</span><span style="color: #709870;">(</span><span style="color: #8b2252;">"Msxml2.XMLHTTP"</span><span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span> <span style="color: #a020f0;">catch</span> <span style="color: #909183;">(</span>othermicrosoft<span style="color: #909183;">)</span> <span style="color: #909183;">{</span>
            <span style="color: #a020f0;">try</span> <span style="color: #709870;">{</span>
                xmlHttp = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">ActiveXObject</span><span style="color: #907373;">(</span><span style="color: #8b2252;">"Microsoft.XMLHTTP"</span><span style="color: #907373;">)</span>;
            <span style="color: #709870;">}</span> <span style="color: #a020f0;">catch</span> <span style="color: #709870;">(</span>failed<span style="color: #709870;">)</span> <span style="color: #709870;">{</span>
                xmlHttp = <span style="color: #008b8b;">false</span>;
            <span style="color: #709870;">}</span>
        <span style="color: #909183;">}</span>
    <span style="color: #7388d6;">}</span>
    <span style="color: #a020f0;">if</span> <span style="color: #7388d6;">(</span>!xmlHttp<span style="color: #7388d6;">){</span>
        alert<span style="color: #909183;">(</span><span style="color: #8b2252;">"&#26080;&#27861;&#21019;&#24314; XMLHttpRequest &#23545;&#35937;&#65281;"</span><span style="color: #909183;">)</span>;
    <span style="color: #7388d6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div>

<p>
主要的问题:
</p>
<ol class="org-ol">
<li>AJAX 兼容性的写法</li>
<li>DOM 节点兼容性的写法</li>
</ol>

<p>
通过 jQuery 发送请求:
</p>
<div class="org-src-container">
<pre class="src src-js">$.ajax<span style="color: #707183;">(</span><span style="color: #7388d6;">{</span>
    url: <span style="color: #8b2252;">'/xxx'</span>,                 <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20195;&#34920;&#35831;&#27714;&#30340;&#26381;&#21153;&#22120;&#22320;&#22336;</span>
    method: <span style="color: #8b2252;">'get|post|..'</span>,       <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20351;&#29992;&#30340;&#35831;&#27714;&#26041;&#27861;</span>
    headers: <span style="color: #909183;">{}</span>,                 <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35774;&#32622;&#35831;&#27714;&#22836;</span>

    contentType: <span style="color: #8b2252;">'application/x-www-form-urlencoded|...'</span>, <span style="color: #b22222;">// </span><span style="color: #b22222;">&#35831;&#27714;&#30340; enctype</span>
    data: <span style="color: #8b2252;">'String'</span>|Object|Array, <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20256;&#36755;&#30340;&#25968;&#25454;</span>
    processData: <span style="color: #008b8b;">true</span>|<span style="color: #008b8b;">false</span>,     <span style="color: #b22222;">// </span><span style="color: #b22222;">true: &#33509; data &#26159;&#23383;&#31526;&#20018;&#19981;&#22788;&#29702;&#65292;&#21542;&#21017;&#35843;&#29992; $.params(data, tranditional) &#23558;&#20854;&#36716;&#25442;&#20026; UrlSearchParams &#26684;&#24335;</span>
    tranditional: <span style="color: #008b8b;">false</span>|<span style="color: #008b8b;">true</span>,    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#27492;&#21442;&#25968;&#23558;&#20250;&#20256;&#32473;&#19978;&#36848; $.param &#20989;&#25968;&#65292;&#20915;&#23450;&#26159;&#21542;&#28145;&#24230;&#24207;&#21015;</span>

    dataType: <span style="color: #8b2252;">'json?xml?text'</span>,   <span style="color: #b22222;">// </span><span style="color: #b22222;">&#40664;&#35748;&#26681;&#25454; response &#22836;&#37096;&#30340;&#20449;&#24687;&#33258;&#21160;&#25512;&#27979;</span>
    <span style="color: #a020f0;">async</span>: <span style="color: #008b8b;">true</span>|<span style="color: #008b8b;">false</span>,           <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26159;&#21542;&#20351;&#29992;&#24322;&#27493;&#35831;&#27714;&#30340;&#26041;&#24335;</span>
    xhr: <span style="color: #909183;">()</span> =&gt; <span style="color: #909183;">{</span> <span style="color: #a020f0;">var</span> <span style="color: #a0522d;">xhr</span> = $.ajaxSettings.xhr<span style="color: #709870;">()</span> <span style="color: #909183;">}</span>, <span style="color: #b22222;">// </span><span style="color: #b22222;">&#21019;&#24314; xhr &#21518;&#35843;&#29992;</span>
    xhrFields: <span style="color: #909183;">{</span> withCredentials: <span style="color: #008b8b;">true</span> <span style="color: #909183;">}</span>,          <span style="color: #b22222;">// </span><span style="color: #b22222;">&#36328;&#22495;</span>
    timeout, cache, accepts, contents, crossDomain, converters, jsonp, mimeType
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>.done<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>data<span style="color: #7388d6;">)</span> =&gt; <span style="color: #7388d6;">{</span>
    console.log<span style="color: #909183;">(</span>data.xxx<span style="color: #909183;">)</span>;
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>.fail<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>xhr, status, err<span style="color: #7388d6;">)</span> =&gt; <span style="color: #7388d6;">{</span>
    console.error<span style="color: #909183;">(</span>err<span style="color: #909183;">)</span>;
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>.always<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>data|xhr, status<span style="color: #7388d6;">)</span> =&gt; <span style="color: #7388d6;">{</span>
    console.log<span style="color: #909183;">(</span><span style="color: #8b2252;">"&#32456;&#20110;&#32467;&#26463;&#20102;!"</span><span style="color: #909183;">)</span>;
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#35821;&#27861;&#31958;</span>
$.get<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxx"</span>, callback<span style="color: #707183;">)</span>;
$.get<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxx"</span><span style="color: #707183;">)</span>.done<span style="color: #707183;">(</span>callback<span style="color: #707183;">)</span>;
$.post<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxx"</span>, callback<span style="color: #707183;">)</span>;
$.post<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxx"</span>, <span style="color: #7388d6;">{</span> id: 1 <span style="color: #7388d6;">}</span>, callback<span style="color: #707183;">)</span>;
$.post<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxx"</span>, <span style="color: #7388d6;">{</span> id: 1 <span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>.done<span style="color: #707183;">(</span>callback<span style="color: #707183;">)</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#19979;&#38754;&#26159;&#31561;&#21516;&#30340;</span>
$.ajax<span style="color: #707183;">(</span><span style="color: #7388d6;">{</span>
    method: <span style="color: #8b2252;">"get"</span>,
    url: <span style="color: #8b2252;">"/xxx"</span>,
    dataType: <span style="color: #8b2252;">"json"</span>
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>.done<span style="color: #707183;">(</span><span style="color: #a020f0;">function</span> <span style="color: #7388d6;">(</span><span style="color: #a0522d;">data</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">{</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">data is json</span>
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>;
$.getJSON<span style="color: #707183;">(</span><span style="color: #8b2252;">"/XXX"</span>, callback<span style="color: #707183;">)</span>;        <span style="color: #b22222;">// </span><span style="color: #b22222;">1 &#20010;&#20989;&#25968;</span>
$.getJSON<span style="color: #707183;">(</span><span style="color: #8b2252;">"/XXX"</span>, <span style="color: #7388d6;">{</span> a: 2, b: 3<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>;   <span style="color: #b22222;">// </span><span style="color: #b22222;">1 &#20010; json</span>
$.getJSON<span style="color: #707183;">(</span><span style="color: #8b2252;">"/XXX"</span>, <span style="color: #7388d6;">{</span> a: 2, b: 3<span style="color: #7388d6;">}</span>,  callback<span style="color: #707183;">)</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#20004;&#20010;&#65292;&#25968;&#25454;&#21644;&#20989;&#25968;</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#19979;&#38754;&#26159;&#31561;&#21516;&#30340;</span>
$.ajax<span style="color: #707183;">(</span><span style="color: #7388d6;">{</span>
    method: <span style="color: #8b2252;">"get"</span>,
    url: <span style="color: #8b2252;">"/xxx"</span>
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>.done<span style="color: #707183;">(</span><span style="color: #a020f0;">function</span><span style="color: #7388d6;">(</span><span style="color: #a0522d;">data</span><span style="color: #7388d6;">)</span> <span style="color: #7388d6;">{</span>
    $<span style="color: #909183;">(</span><span style="color: #8b2252;">"h3"</span><span style="color: #909183;">)</span>.html<span style="color: #909183;">(</span>data<span style="color: #909183;">)</span>;
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>;
$<span style="color: #707183;">(</span><span style="color: #8b2252;">"h3"</span><span style="color: #707183;">)</span>.load<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxx"</span><span style="color: #707183;">)</span>;

<span style="color: #b22222;">// </span><span style="color: #b22222;">&#21152;&#36733; js &#33050;&#26412;</span>
$.getScript<span style="color: #707183;">(</span><span style="color: #8b2252;">"/xxxx.js"</span><span style="color: #707183;">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org491c23d" class="outline-4">
<h4 id="org491c23d"><span class="section-number-4">1.1.5.</span> Fetch API</h4>
<div class="outline-text-4" id="text-1-1-5">
<p>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch">https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch</a>
</p>

<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">list</span> <span style="color: #707183;">()</span> <span style="color: #707183;">{</span>
    fetch<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/Post/List"</span><span style="color: #7388d6;">)</span>
        .then<span style="color: #7388d6;">(</span>response =&gt; response.json<span style="color: #909183;">()</span><span style="color: #7388d6;">)</span>
        .then<span style="color: #7388d6;">(</span>posts =&gt; <span style="color: #909183;">{</span>
            document.querySelector<span style="color: #709870;">(</span><span style="color: #8b2252;">".list-box"</span><span style="color: #709870;">)</span>.innerHTML = posts.length &gt; 0 ? <span style="color: #8b2252;">""</span> : <span style="color: #8b2252;">"&#27809;&#26377;&#20219;&#20309;&#25991;&#31456;"</span>;
            <span style="color: #a020f0;">for</span> <span style="color: #709870;">(</span><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">i</span> = 0; i &lt; posts.length; i++<span style="color: #709870;">)</span> <span style="color: #709870;">{</span>
                renderPost<span style="color: #907373;">(</span>posts<span style="color: #6276ba;">[</span>i<span style="color: #6276ba;">]</span><span style="color: #907373;">)</span>;
            <span style="color: #709870;">}</span>
        <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>.<span style="color: #a020f0;">catch</span><span style="color: #7388d6;">(</span>e =&gt; <span style="color: #909183;">{</span>
            renderError<span style="color: #709870;">(</span>err<span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>

<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">upload</span> <span style="color: #707183;">(</span><span style="color: #a0522d;">e</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">fd</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">FormData</span><span style="color: #7388d6;">()</span>;
    fd.append<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"x"</span>, $<span style="color: #909183;">(</span><span style="color: #8b2252;">"#mfile"</span><span style="color: #909183;">)</span>.get<span style="color: #909183;">(</span>0<span style="color: #909183;">)</span>.files<span style="color: #909183;">[</span>0<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span>;

    fetch<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/Post/Upload"</span>, <span style="color: #909183;">{</span> method: <span style="color: #8b2252;">"POST"</span>, body: fd <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>
        .then<span style="color: #7388d6;">(</span>r =&gt; r.text<span style="color: #909183;">()</span><span style="color: #7388d6;">)</span>
        .then<span style="color: #7388d6;">(</span>name =&gt; <span style="color: #909183;">{</span>
            document.querySelector<span style="color: #709870;">(</span><span style="color: #8b2252;">"#cover"</span><span style="color: #709870;">)</span>.value = name;
            document.querySelector<span style="color: #709870;">(</span><span style="color: #8b2252;">"#preview"</span><span style="color: #709870;">)</span>.src = <span style="color: #8b2252;">`/images/${name}`</span>;
        <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>

<span style="color: #a020f0;">async</span> <span style="color: #a020f0;">function</span> save <span style="color: #707183;">(</span><span style="color: #a0522d;">e</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">fd</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">FormData</span><span style="color: #7388d6;">()</span>;
    fd.append<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"cover"</span>, document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">"#cover"</span><span style="color: #909183;">)</span>.value<span style="color: #7388d6;">)</span>;
    fd.append<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"author"</span>, document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">"#author"</span><span style="color: #909183;">)</span>.value<span style="color: #7388d6;">)</span>;
    fd.append<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"title"</span>, document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">"#title"</span><span style="color: #909183;">)</span>.value<span style="color: #7388d6;">)</span>;
    fd.append<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"content"</span>, document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">"#content"</span><span style="color: #909183;">)</span>.value<span style="color: #7388d6;">)</span>;

    <span style="color: #a020f0;">try</span> <span style="color: #7388d6;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">rsp</span> = <span style="color: #a020f0;">await</span> fetch<span style="color: #909183;">(</span><span style="color: #8b2252;">"/Post/Save"</span>, <span style="color: #709870;">{</span> method: <span style="color: #8b2252;">"post"</span>, body: fd <span style="color: #709870;">}</span><span style="color: #909183;">)</span>;
        renderPost<span style="color: #909183;">(</span><span style="color: #a020f0;">await</span> rsp.json<span style="color: #709870;">()</span><span style="color: #909183;">)</span>;

        clearInputs<span style="color: #909183;">()</span>;
        document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">".post-new"</span><span style="color: #909183;">)</span>.style.display = <span style="color: #8b2252;">"block"</span>;
        document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">".input-box"</span><span style="color: #909183;">)</span>.style.display = <span style="color: #8b2252;">"none"</span>;
    <span style="color: #7388d6;">}</span> <span style="color: #a020f0;">catch</span> <span style="color: #7388d6;">(</span>e<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">{</span>
        renderError<span style="color: #909183;">(</span><span style="color: #8b2252;">"&#20445;&#23384;&#22833;&#36133;"</span><span style="color: #909183;">)</span>;
    <span style="color: #7388d6;">}</span>
<span style="color: #707183;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8861c0b" class="outline-4">
<h4 id="org8861c0b"><span class="section-number-4">1.1.6.</span> axios</h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
基本使用:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">list</span> <span style="color: #707183;">()</span> <span style="color: #707183;">{</span>
    axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/Post/List"</span><span style="color: #7388d6;">)</span>
        .then<span style="color: #7388d6;">(</span>resp =&gt; <span style="color: #909183;">{</span>
            <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">posts</span> = resp.data;
            document.querySelector<span style="color: #709870;">(</span><span style="color: #8b2252;">".list-box"</span><span style="color: #709870;">)</span>.innerHTML = posts.length &gt; 0 ? <span style="color: #8b2252;">""</span> : <span style="color: #8b2252;">"&#27809;&#26377;&#20219;&#20309;&#25991;&#31456;"</span>;
            <span style="color: #a020f0;">for</span> <span style="color: #709870;">(</span><span style="color: #a020f0;">let</span> <span style="color: #a0522d;">i</span> = 0; i &lt; posts.length; i++<span style="color: #709870;">)</span> <span style="color: #709870;">{</span>
                renderPost<span style="color: #907373;">(</span>posts<span style="color: #6276ba;">[</span>i<span style="color: #6276ba;">]</span><span style="color: #907373;">)</span>;
            <span style="color: #709870;">}</span>
        <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>
        .<span style="color: #a020f0;">catch</span><span style="color: #7388d6;">(</span>e =&gt; renderError<span style="color: #909183;">(</span>err<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>

<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">upload</span> <span style="color: #707183;">(</span><span style="color: #a0522d;">e</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">fd</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">FormData</span><span style="color: #7388d6;">()</span>;
    fd.append<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"x"</span>, $<span style="color: #909183;">(</span><span style="color: #8b2252;">"#mfile"</span><span style="color: #909183;">)</span>.get<span style="color: #909183;">(</span>0<span style="color: #909183;">)</span>.files<span style="color: #909183;">[</span>0<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span>;

    axios<span style="color: #7388d6;">(</span><span style="color: #909183;">{</span>
        method: <span style="color: #8b2252;">"post"</span>,
        url: <span style="color: #8b2252;">"/Post/Upload"</span>,
        data: fd
    <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>.then<span style="color: #7388d6;">(</span>resp =&gt; <span style="color: #909183;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">name</span> = resp.data;
        document.querySelector<span style="color: #709870;">(</span><span style="color: #8b2252;">"#cover"</span><span style="color: #709870;">)</span>.value = name;
        document.querySelector<span style="color: #709870;">(</span><span style="color: #8b2252;">"#preview"</span><span style="color: #709870;">)</span>.src = <span style="color: #8b2252;">`/images/${name}`</span>;
    <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>

<span style="color: #a020f0;">async</span> <span style="color: #a020f0;">function</span> save <span style="color: #707183;">(</span><span style="color: #a0522d;">e</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">fd</span> = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">FormData</span><span style="color: #7388d6;">()</span>;
    <span style="color: #7388d6;">[</span><span style="color: #8b2252;">"cover"</span>, <span style="color: #8b2252;">"author"</span>, <span style="color: #8b2252;">"title"</span>, <span style="color: #8b2252;">"content"</span><span style="color: #7388d6;">]</span>.forEach<span style="color: #7388d6;">(</span>id =&gt; <span style="color: #909183;">{</span>
        fd.append<span style="color: #709870;">(</span>id, document.querySelector<span style="color: #907373;">(</span><span style="color: #8b2252;">`#${id}`</span><span style="color: #907373;">)</span>.value<span style="color: #709870;">)</span>;
    <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>;

    <span style="color: #a020f0;">try</span> <span style="color: #7388d6;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">rsp</span> = <span style="color: #a020f0;">await</span> axios<span style="color: #909183;">(</span><span style="color: #8b2252;">"/Post/Save"</span>, <span style="color: #709870;">{</span> method: <span style="color: #8b2252;">"post"</span>, data: fd <span style="color: #709870;">}</span><span style="color: #909183;">)</span>;
        renderPost<span style="color: #909183;">(</span>rsp.data<span style="color: #909183;">)</span>;

        clearInputs<span style="color: #909183;">()</span>;
        document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">".post-new"</span><span style="color: #909183;">)</span>.style.display = <span style="color: #8b2252;">"block"</span>;
        document.querySelector<span style="color: #909183;">(</span><span style="color: #8b2252;">".input-box"</span><span style="color: #909183;">)</span>.style.display = <span style="color: #8b2252;">"none"</span>;
    <span style="color: #7388d6;">}</span> <span style="color: #a020f0;">catch</span> <span style="color: #7388d6;">(</span>e<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">{</span>
        renderError<span style="color: #909183;">(</span><span style="color: #8b2252;">"&#20445;&#23384;&#22833;&#36133;"</span><span style="color: #909183;">)</span>;
    <span style="color: #7388d6;">}</span>
<span style="color: #707183;">}</span>

</pre>
</div>

<p>
回调地狱 (Callback Hell):
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #a020f0;">function</span> <span style="color: #0000ff;">xxx_then</span> <span style="color: #707183;">(</span><span style="color: #a0522d;">e</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/post/getpost/3"</span><span style="color: #7388d6;">)</span>
        .then<span style="color: #7388d6;">(</span>r =&gt; <span style="color: #909183;">{</span>
            console.log<span style="color: #709870;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #709870;">)</span>;
            axios<span style="color: #709870;">(</span><span style="color: #8b2252;">"/post/getpost/5"</span><span style="color: #709870;">)</span>
                .then<span style="color: #709870;">(</span>r =&gt; <span style="color: #907373;">{</span>
                    console.log<span style="color: #6276ba;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #6276ba;">)</span>;
                    axios<span style="color: #6276ba;">(</span><span style="color: #8b2252;">"/post/getpost/6"</span><span style="color: #6276ba;">)</span>
                        .then<span style="color: #6276ba;">(</span>r =&gt; <span style="color: #858580;">{</span>
                            console.log<span style="color: #80a880;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #80a880;">)</span>;
                            axios<span style="color: #80a880;">(</span><span style="color: #8b2252;">"/post/getpost/15"</span><span style="color: #80a880;">)</span>
                                .then<span style="color: #80a880;">(</span>r =&gt; <span style="color: #887070;">{</span>
                                    console.log<span style="color: #707183;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #707183;">)</span>;
                                    axios<span style="color: #707183;">(</span><span style="color: #8b2252;">"/post/getpost/23"</span><span style="color: #707183;">)</span>
                                        .then<span style="color: #707183;">(</span>r =&gt; <span style="color: #7388d6;">{</span>
                                            console.log<span style="color: #909183;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #909183;">)</span>;
                                            alert<span style="color: #909183;">(</span><span style="color: #8b2252;">"&#32456;&#20110;&#32467;&#26463;&#20102;"</span><span style="color: #909183;">)</span>;
                                        <span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>;
                                <span style="color: #887070;">}</span><span style="color: #80a880;">)</span>;
                        <span style="color: #858580;">}</span><span style="color: #6276ba;">)</span>;
                <span style="color: #907373;">}</span><span style="color: #709870;">)</span>;
        <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>

<span style="color: #a020f0;">async</span> <span style="color: #a020f0;">function</span> xxx <span style="color: #707183;">(</span><span style="color: #a0522d;">e</span><span style="color: #707183;">)</span> <span style="color: #707183;">{</span>
    <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r</span>;

    r = <span style="color: #a020f0;">await</span> axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/post/getpost/3"</span><span style="color: #7388d6;">)</span>;
    console.log<span style="color: #7388d6;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #7388d6;">)</span>;

    r = <span style="color: #a020f0;">await</span> axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/post/getpost/5"</span><span style="color: #7388d6;">)</span>;
    console.log<span style="color: #7388d6;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #7388d6;">)</span>;

    r = <span style="color: #a020f0;">await</span> axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/post/getpost/6"</span><span style="color: #7388d6;">)</span>;
    console.log<span style="color: #7388d6;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #7388d6;">)</span>;

    r = <span style="color: #a020f0;">await</span> axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/post/getpost/15"</span><span style="color: #7388d6;">)</span>;
    console.log<span style="color: #7388d6;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #7388d6;">)</span>;

    r = <span style="color: #a020f0;">await</span> axios<span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/post/getpost/23"</span><span style="color: #7388d6;">)</span>;
    console.log<span style="color: #7388d6;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>

<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">xxx_await_short</span><span style="color: #707183;">()</span>
<span style="color: #707183;">{</span>
    <span style="color: #7388d6;">[</span>3, 5, 6, 15, 23<span style="color: #7388d6;">]</span>.forEach<span style="color: #7388d6;">(</span><span style="color: #a020f0;">async</span> id =&gt; <span style="color: #909183;">{</span>
        <span style="color: #a020f0;">let</span> <span style="color: #a0522d;">r</span> = <span style="color: #a020f0;">await</span> axios<span style="color: #709870;">(</span><span style="color: #8b2252;">"/post/getpost/"</span> + id<span style="color: #709870;">)</span>;
        console.log<span style="color: #709870;">(</span><span style="color: #8b2252;">`&#24471;&#21040; ${r.data.title}`</span><span style="color: #709870;">)</span>;
    <span style="color: #909183;">}</span><span style="color: #7388d6;">)</span>;
<span style="color: #707183;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb5b2e0e" class="outline-3">
<h3 id="orgb5b2e0e"><span class="section-number-3">1.2.</span> 页面</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-orgea09761" class="outline-4">
<h4 id="orgea09761"><span class="section-number-4">1.2.1.</span> A/FORM</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
得到的，就是完整的页面:
</p>
<ul class="org-ul">
<li>服务器端，通过模板引擎，模块化的方式，组合成了完整的页面</li>
</ul>
</div>
</div>

<div id="outline-container-orgb7dc610" class="outline-4">
<h4 id="orgb7dc610"><span class="section-number-4">1.2.2.</span> AJAX/原生 DOM 节点</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
浏览器需要将得到的数据 (本质是字符串)，转换为 DOM 节点的一部分:
</p>
<ul class="org-ul">
<li>ajax 发送请求，得到数据</li>
<li>将结果拼接成合理的 html 字符串片段</li>
<li>找到 dom 中的某个节点</li>
<li>将上述拼装的字符串，更新到选择的节点上</li>
</ul>
</div>
</div>

<div id="outline-container-org6327adb" class="outline-4">
<h4 id="org6327adb"><span class="section-number-4">1.2.3.</span> jQuery</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
将拼字符串的方式发扬光大
</p>
</div>
</div>

<div id="outline-container-org4c9f26a" class="outline-4">
<h4 id="org4c9f26a"><span class="section-number-4">1.2.4.</span> Vue/ReactJS/Angular</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li>前端的模板引擎</li>
<li>组件化、模块化、工程化</li>
</ul>
</div>
</div>
</div>
</section>
<section id="outline-container-org09e9bb8" class="outline-2">
<h2 id="org09e9bb8"><span class="section-number-2">2.</span> ASP.NET Core</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>JSP: Java Server Pages</li>
<li>ASP: Active Server Pages</li>
<li>ASP.NET</li>
</ul>

<p>
ASP.NET 为 .NET 平台提供了完整的进行 Web 开发的底层框架:
</p>
<ul class="org-ul">
<li>(ADO.NET - EF)</li>
<li>Webforms - Winforms (事件驱动、基于控件)</li>
<li>ASP.NET MVC (模型-视图-控制器)</li>
<li>ASP.NET Web API</li>
</ul>

<p>
ASP.NET Core:
</p>
<ul class="org-ul">
<li>Razor Page</li>
<li>Blazor (组件，使用 C# 写前端)</li>
<li>MVC (跨平台，内置 web 服务器，内置 DI 容器)</li>
<li>Web API</li>
</ul>
</div>

<div id="outline-container-org4497edf" class="outline-3">
<h3 id="org4497edf"><span class="section-number-3">2.1.</span> 基本概念</h3>
<div class="outline-text-3" id="text-2-1">
<p>
HTML:
</p>
<pre class="example" id="orgde6e882">
HTML 由来. HTML的英文全称是 Hyper Text Markup Language，即超文本标记语
言。HTML是由Web的发明者 Tim Berners-Lee和同事 Daniel W. Connolly于
1990年创立的一种标记语言，它是标准通用化标记语言SGML的应用。用HTML编
写的超文本文档称为HTML文档，它能独立于各种操作系统平台 (如UNIX，
Windows等)。使用HTML，将所需要表达的信息按某种规则写成HTML文件，通过
专用的浏览器来识别，并将这些HTML文件“翻译”成可以识别的信息，即现在所
见到的网页。
</pre>
</div>
</div>
</section>

<section id="outline-container-org900d865" class="outline-2">
<h2 id="org900d865"><span class="section-number-2">3.</span> MVC</h2>
<div class="outline-text-2" id="text-3">
<p>
项目的创建跟初始化:
</p>
<div class="org-src-container">
<pre class="src src-sh">dotnet new mvc -o MvcMovie1
<span style="color: #483d8b;">cd</span> MvcMovie1

<span style="color: #b22222;">#</span><span style="color: #b22222;">dotnet tool install --global dotnet-ef --version 5.0.0</span>
<span style="color: #b22222;">#</span><span style="color: #b22222;">dotnet tool install --global dotnet-aspnet-codegenerator --version 5.0.0</span>
dotnet add package Microsoft.EntityFrameworkCore.SQLite --version 5.0.0
dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 5.0.0
dotnet add package Microsoft.EntityFrameworkCore.Design --version 5.0.0
dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design --version 5.0.0

code .
<span style="color: #b22222;"># </span><span style="color: #b22222;">Movie1.cs</span>

dotnet-aspnet-codegenerator controller -name Movies1Controller -m Movie1 -dc MvcMovie1Context --relativeFolderPath Controllers --useDefaultLayout --referenceScriptLibraries -sqlite
<span style="color: #b22222;"># </span><span style="color: #b22222;">appsettings.json</span>

dotnet ef migrations add FirstInit
dotnet ef database update


dotnet run
dotnet watch run
</pre>
</div>

<p>
生成种子数据:
</p>
<div class="org-src-container">
<pre class="src src-sql"><span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>1, "xx1", 123<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>2, "x2x1", 132<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>3, "xx31", 213<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>4, "x2x1", 13<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>5, "xxk1", 132<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>6, "xax1", 13<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>7, "xbx1", 23<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>8, "xxy1", 53<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>9, "xxz1", 923<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>10, "xx-1", 13<span style="color: #707183;">)</span>;
<span style="color: #a020f0;">insert</span> <span style="color: #a020f0;">into</span> movie1 <span style="color: #707183;">(</span>id, <span style="color: #a020f0;">name</span>, price<span style="color: #707183;">)</span> <span style="color: #a020f0;">values</span> <span style="color: #707183;">(</span>11, "x-x1", 123<span style="color: #707183;">)</span>;
</pre>
</div>

<p>
进行相关修改:
</p>
<ol class="org-ol">
<li>修改 _layout 文件</li>
<li>重新对 Movies1Controller 里面的内容做调整</li>
<li>对视图页面 (Views/*) 进行编辑</li>
</ol>

<p>
添加字段:
</p>
<ol class="org-ol">
<li>修改 Model, Url</li>
<li><p>
执行命令
</p>
<div class="org-src-container">
<pre class="src src-sh">dotnet ef migrations add AddUrlToMovie1
dotnet ef database update
</pre>
</div></li>
</ol>

<p>
添加一个 Controller:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;"># </span><span style="color: #b22222;">Actor.cs</span>

dotnet-aspnet-codegenerator controller -name ActorController -m Actor -dc MvcMovie1Context --relativeFolderPath Controllers --useDefaultLayout --referenceScriptLibraries -sqlite

dotnet ef migrations add AddModelActor
dotnet ef database update
</pre>
</div>
</div>
</section>

<section id="outline-container-org37d53cf" class="outline-2">
<h2 id="org37d53cf"><span class="section-number-2">4.</span> WebAPI</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1379624" class="outline-3">
<h3 id="org1379624"><span class="section-number-3">4.1.</span> 项目的创建</h3>
<div class="outline-text-3" id="text-4-1">
<p>
创建一个新项目:
</p>
<pre class="example">
dotnet new webapi -o 你的项目名字
</pre>


<p>
如果需要 ef 支持，添加:
</p>
<pre class="example">
dotnet add package Microsoft.EntityFrameworkCore.SQLite --version 5.0.0
</pre>
</div>
</div>

<div id="outline-container-orgb65e312" class="outline-3">
<h3 id="orgb65e312"><span class="section-number-3">4.2.</span> Controller</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>需要继承自 ControllerBase</li>
<li>ControllerBase 里提供了 Ok/NotFound/BadReqeust/Content/CreatedAtAction 之类的方法</li>
<li>通过 [Route] [HttpXxx] 的方式，构成了访问的 url</li>
<li>返回值可以是一个类，可以是列表、枚举对象，也可以是 ActionResult</li>
<li>[ApiController] 作用在 Controller 类上</li>
</ul>
</div>
</div>

<div id="outline-container-org3922bce" class="outline-3">
<h3 id="org3922bce"><span class="section-number-3">4.3.</span> RESTful</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>什么是前后端分离</li>
<li>为什么使用 JSON 进行数据传递</li>
<li>什么是 RESTful</li>
<li>什么是 YAML</li>
</ul>
</div>
</div>

<div id="outline-container-orge5b511c" class="outline-3">
<h3 id="orge5b511c"><span class="section-number-3">4.4.</span> OpenAPI/Swagger</h3>
<div class="outline-text-3" id="text-4-4">
<p>
背景:
</p>
<ul class="org-ul">
<li>前后端分离大趋势</li>
<li>前后端的开发，需要在 API 方面进行深入交流</li>
<li>在这样的需求驱动下，最后就产生了 OpenAPI 的标准</li>
<li>它的核心就是一个 json/yaml 文档</li>
<li>Swagger 是 OpenAPI 的实现:
<ul class="org-ul">
<li>Codegen</li>
<li>Editor</li>
<li>UI</li>
</ul></li>
</ul>

<p>
使用 Swagger 的步骤。在这里，我们使用 Swashbuckle 框架。
</p>

<p>
首先，添加依赖到项目。
</p>

<pre class="example">
dotnet add package Swashbuckle.AspNetCore
</pre>


<p>
其次，注入相关内容。
</p>

<div class="org-src-container">
<pre class="src src-csharp">services.<span style="color: #0000ff;">AddSwaggerGen</span><span style="color: #707183;">(</span>c =&gt;
<span style="color: #7388d6;">{</span>
    c.<span style="color: #0000ff;">SwaggerDoc</span><span style="color: #909183;">(</span><span style="color: #8b2252;">"v1"</span>, <span style="color: #a020f0;">new</span> <span style="color: #228b22;">OpenApiInfo</span> <span style="color: #709870;">{</span> <span style="color: #a0522d;">Title</span> = <span style="color: #8b2252;">"&#25105;&#30340;&#39033;&#30446;"</span>, <span style="color: #a0522d;">Version</span> = <span style="color: #8b2252;">"v1.2"</span> <span style="color: #709870;">}</span><span style="color: #909183;">)</span>;
<span style="color: #7388d6;">}</span><span style="color: #707183;">)</span>;
</pre>
</div>

<p>
最后，配置使用:
</p>
<div class="org-src-container">
<pre class="src src-csharp">app.<span style="color: #0000ff;">UseSwagger</span><span style="color: #707183;">()</span>;
app.<span style="color: #0000ff;">UseSwaggerUI</span><span style="color: #707183;">(</span>c =&gt; c.<span style="color: #0000ff;">SwaggerEndpoint</span><span style="color: #7388d6;">(</span><span style="color: #8b2252;">"/swagger/v1/swagger.json"</span>, <span style="color: #8b2252;">"WebApplication1 v1"</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>;
</pre>
</div>

<p>
访问:
</p>
<pre class="example" id="orged53b13">
doc: https://localhost:44322/swagger/v1/swagger.json
ui:  https://localhost:44322/swagger/index.html
</pre>
</div>
</div>
</section>



<section id="outline-container-org83525d8" class="outline-2">
<h2 id="org83525d8"><span class="section-number-2">5.</span> Identity</h2>
<div class="outline-text-2" id="text-5">
<p>
Identity:
</p>
<pre class="example" id="org9e2833e">
名词:
 1. 身分 (identity, status, position, rank, dignity)
 2. 特性 (characteristic, feature, property, behavior, identity, characteristical)
 3. 个性 (personality, individuality, character, individual character, identity, selfhood)
 4. 恒等式 (identity)
</pre>

<p>
ASP.NET 中，Identity 主要做的两件事:
</p>
<ol class="org-ol">
<li>Authentication (认证、验证) 登录</li>
<li>Authorization (授权)</li>
</ol>



<div class="org-src-container">
<pre class="src src-sqlite"><span style="color: #a020f0;">select</span> * <span style="color: #a020f0;">from</span> AspNetUsers;
</pre>
</div>




<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-right">

<col  class="org-right">

<col  class="org-left">

<col  class="org-right">

<col  class="org-right">
</colgroup>
<tbody>
<tr>
<td class="org-left">02333d35-a7fa-439d-879b-7876c8eb278c</td>
<td class="org-left">wodeyouxiang@qq.com</td>
<td class="org-left">WODEYOUXIANG@QQ.COM</td>
<td class="org-left">wodeyouxiang@qq.com</td>
<td class="org-left">WODEYOUXIANG@QQ.COM</td>
<td class="org-right">0</td>
<td class="org-left">AQAAAAEAACcQAAAAEPCUecCKcIWyQfqVRSgeFTEz/P94aqvELBbx17XJWa8RmXbOBnvA0EV5cZBps3JGnQ==</td>
<td class="org-left">2G5SUZCMSEDXPK6MBUC25NEH2XKWJ4YE</td>
<td class="org-left">62ce8e06-9a0b-4a07-9ad5-01c914821d13</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
</tr>
</tbody>
</table>
</div>
</section>
</div>
<div id="postamble" class="status">
<p class="author">Author: 悟饭</p>
<p class="date">Created: 2022-04-08</p>
<p class="validation">Go ahead, never stop.</p>
</div>
</body>
</html>
